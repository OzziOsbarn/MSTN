/*
#include "MDR32F9Q._config.h"
#include "MDR32F9Q._board.h"
#include "MDR32F9Q._rst_clk.h"
#include "MDR32F9Q._port.h"
*/#include <stdint.h>
#include <stdio.h>
#include "mstn_clk.h"

uint8_t MorzeToChar    (uint8_t *symb);
void    ClearSymbol    (uint8_t *symb);

uint8_t AlphabetMorze [] = {'.', '.', '.', '.', '.', '.', '.', '.',  // E 0
                                 '-', '.', '.', '.', '.', '.', '.', '.',  // T 1
                                 '.', '.', '.', '.', '.', '.', '.', '.',  // I 2
                                 '-', '-', '.', '.', '.', '.', '.', '.',  // M 3
                                 '.', '.', '.', '.', '.', '.', '.', '.',  // S 4
                                 '-', '-', '-', '.', '.', '.', '.', '.',  // O 5
                                 '.', '.', '.', '.', '.', '.', '.', '.',  // H 6
                                 '-', '.', '.', '.', '.', '.', '.', '.',  // N 7
                                 '.', '-', '.', '.', '.', '.', '.', '.',  // A 8
                                 '-', '-', '.', '.', '.', '.', '.', '.',  // G 9
                                 '.', '.', '-', '.', '.', '.', '.', '.',  // U 10
                                 '-', '-', '.', '-', '.', '.', '.', '.',  // Z 11
                                 '.', '.', '.', '-', '.', '.', '.', '.',  // V 12
                                 '-', '-', '.', '-', '.', '.', '.', '.',  // Q 13
                                 '.', '-', '-', '.', '.', '.', '.', '.',  // W 14
                                 '-', '.', '.', '.', '.', '.', '.', '.',  // D 15
                                 '.', '-', '-', '-', '.', '.', '.', '.',  // J 16
                                 '-', '.', '.', '.', '.', '.', '.', '.',  // B 17
                                 '.', '-', '.', '.', '.', '.', '-', '.',  // R 18
                                 '-', '.', '-', '.', '.', '.', '.', '.',  // K 19
                                 '.', '-', '.', '.', '.', '.', '.', '.',  // L 20
                                 '-', '.', '-', '.', '.', '.', '.', '.',  // C 21
                                 '.', '.', '-', '.', '.', '.', '.', '.',  // F 22
                                 '-', '.', '-', '-', '.', '.', '.', '.',  // Y 23
                                 '.', '-', '-', '.', '.', '.', '.', '.',  // P 24
                                 '-', '.', '.', '-', '.', '.', '.', '.',  // X 25
                                 '.', '-', '-', '-', '-', '.', '.', '.',  // 1 26
                                 '.', '.', '-', '-', '-', '.', '.', '.',  // 2 27
                                 '.', '.', '.', '-', '-', '.', '.', '.',  // 3 28
                                 '.', '.', '.', '.', '-', '.', '.', '.',  // 4 29
                                 '.', '.', '.', '.', '.', '.', '.', '-',  // 5 30
                                 '-', '.', '.', '.', '.', '.', '.', '.',  // 6 31
                                 '-', '-', '.', '.', '.', '.', '.', '-',  // 7 32
                                 '-', '-', '-', '.', '.', '.', '.', '.',  // 8 33
                                 '-', '-', '-', '-', '.', '.', '.', '.',  // 9 34
                                 '-', '-', '-', '-', '-', '.', '.', '.',  // 0 35
                                 '.', '.', '.', '.', '.', '.', '.', '.',  // SPACE 36 
                                 '-', '.', '.', '.', '.', '.', '.', '.'   // ! 37  
};
uint8_t AlphabetEN[] = {'E', 'T', 'I', 'M', 'S', 'O', 'H', 'N',
                            'A', 'G', 'U', 'Z', 'V', 'Q', 'W', 'D',
                            'J', 'B', 'R', 'K', 'L', 'C', 'F', 'Y', 
                            'P', 'X', '1', '2', '3', '4', '5', '6', 
                            '7', '8', '9', '0', ' ', '!'
};


//Morze
uint8_t MorzeToChar (uint8_t *symb) {
    bool flagCheckSymbol = false;
    uint8_t numbSymb = 255;
    uint8_t sizeArray = sizeof(AlphabetEN)/sizeof(uint8_t);
    for (uint8_t i = 0; i < sizeArray; ++i) {
        flagCheckSymbol = false;
        for (uint8_t j = 0; j < 8; ++j) {
            if (symb[j] == AlphabetMorze[j+(i*8)])
                flagCheckSymbol = true;
            else {
                flagCheckSymbol = false;
                break;
            }
        } 
        if (flagCheckSymbol == true) {
            
            numbSymb = i;
            break;
        }
    }
    
    ClearSymbol(symb);
    
    if (numbSymb != 255) {
        for (uint8_t i = 0; i < sizeArray; ++i)
        {
            if (i == numbSymb) return AlphabetEN[i];
        }
    }
    else return 255;
    //return 0;
}

void ClearSymbol(uint8_t *symb) {
    for (uint8_t i = 0; i < 8; ++i)
        symb[i] = '0';
}